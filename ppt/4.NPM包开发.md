# 4. NPM 包开发


## cli 基础
<!-- 
命令行工具
1. 讲解命令行范式
2. 讲解如何读懂命令行
 -->
* `command,sub command` 命令名和子命令名 
* `options` 命令行的选项,修改命令的运行行为
  * `--xx-xx` 称为长选项 `long options`
  * `-x` 称为短选项 `short options`
* `arguments` 命令行需要处理的输入参数
* `flag` 特殊的 options 一般为开关量


## cli
<!-- 
编写命令行工具
TODO: 添加 commander 使用示例
 -->
[commander](https://www.npmjs.com/package/commander)


## 同构包 
>  **同构是指一套代码多端运行** 如何让开发的包可以同时运行在浏览器端和 node 端？


## 同构包
* 宿主环境判断采用不同策略,实现模块加载,利用 `process -> node`
  * [debug](https://github.com/visionmedia/debug/tree/master/src)
  * axios,浏览器端采用 `XMLHttpRequest` 服务端 `http`

> 虽然导出的是 commonjs 模块,可以使用 browserify,webpack 进行编译


## monorepo 
<!-- 
* `仓库` 用于协同开发的代码库
* `包` 具有独立功能的软件单元(工具,库,框架...)
 -->

1. 开发一个组件库,如何降低组件的耦合度,确保组件可以独立工作
并组合使用？[elementUI](https://github.com/ElemeFE/element)
2. 开发工具库,如何保证多个插件包功能的独立性,又可以复用相同的构建工具
避免重复搭建脚手架? [babel](https://github.com/babel/babel/blob/master/doc/design/monorepo.md)

> <p class="fade-left fragment" style="color:#cb3837">monorepo(monolithic repository) 是采用单一仓库管理多包的开发策略</p> 


## monorepo
* 如何协调仓库版本和包版本的关系？
* 如何在单一仓库控制多个包的构建？
* 如何管理包之间的依赖关系？


## lerna
<a href="https://github.com/lerna/lerna"><img width="830" height="600" src="./static/lerna.png" ></a>


## 