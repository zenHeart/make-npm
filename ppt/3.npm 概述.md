# npm 组成
node package manager 包管理系统:

* web 主站
* web cli 工具
* registry 数据库

## [npm registry](<https://docs.npmjs.com/misc/registry>)
* npm 仓库管理工具
* [公共镜像](https://skimdb.npmjs.com/registry)
* [仓库源码](https://github.com/npm/npm-registry-couchapp)

## 基本流程
1. 注册 npm 账号 <https://docs.npmjs.com/creating-a-new-npm-user-account>
2. 


## 包类型


## npm 目录结构


## 安装模式
1. 全局安装 ,`npm i -g`
   1. 普通包 `prefix/lib/node_modules`
   2. 二进制包 `prefix/bin`
2. 本地安装 `npm i`
   1. 普通包 `./node_modules`
   2. 二进制包 `./node_modules/.bin`


## 核心配置
* 运行时配置,`--key value`
* 环境变量,`npm_config_key=val` 设置配置
* 用户配置 `$HOME/.npmrc`,可以利用运行时`userconfig` 替代配置
* 全局配置 `/usr/local/etc/nmprc` 运行时 `globalconfig` 替换
* 默认配置,在 `lib/utils/config-defs.js` 无法修改


## 命令行列表
* [npm 命令行](https://docs.npmjs.com/cli-documentation/)


## npm install
* 默认安装 `package.json` 中的所有包
* `--production` 或者 `NODE_ENV` 为 production 则不安装 `devDependencies`


## 小技巧
* `npm docs` 快速打开主页


## 
* [package-lock.json](https://docs.npmjs.com/files/package-lock.json.html) 用于锁版本,无法发布
* [npm-shrinkwrap.json](https://docs.npmjs.com/cli/shrinkwrap) 功能相同可以发布


## npm scripts
<https://docs.npmjs.com/misc/scripts.html>


## 版本化
<https://docs.npmjs.com/misc/semver.html>


## registry api
* <https://github.com/npm/registry> api 文档
* <https://github.com/npm/npm-registry-client> api 客户端